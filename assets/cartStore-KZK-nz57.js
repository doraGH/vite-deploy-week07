import{e as u,f as e,q as r}from"./index-U9yuG7nn.js";import{S as c}from"./sweetalert2.all-mwGm6plC.js";var h={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"dorayu",BASE_URL:"/vite-deploy-week07/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:o,VITE_PATH:i}=h,m=u("cartStore",{state:()=>({cartList:{},isLoading:!1,status:{loadCart:"",loadQty:""}}),actions:{addCart(t,a=1){const s=`${o}/api/${i}/cart`;this.status.loadCart=t;const d={data:{product_id:t,qty:a}};e.post(s,d).then(n=>{this.status.loadCart="",this.getCarts(),r.success(n.data.message)}).catch(n=>{r.error(n.response.data.message)})},getCarts(){const t=`${o}/api/${i}/cart`;this.isLoading=!0,e.get(t).then(a=>{const{data:s}=a.data;this.isLoading=!1,this.cartList=s}).catch(a=>{c.fire(a.response.data.message)})},removeCartItem(t){const a=`${o}/api/${i}/cart/${t}`;this.status.loadQty=t,e.delete(a).then(s=>{r.success(s.data.message),this.status.loadQty="",this.getCarts()}).catch(s=>{r.error(s.response.data.message)})},deleteAllCarts(){const t=`${o}/api/${i}/carts`;c.fire({title:"確定要刪除全部購物車嗎?",showDenyButton:!0,confirmButtonText:"是，我要刪除",denyButtonText:"不要刪除"}).then(a=>{a.isConfirmed&&e.delete(t).then(s=>{this.getCarts(),c.fire(s.data.message)}).catch(s=>{r.error(s.response.data.message)})})},updateCart(t){const a=`${o}/api/${i}/cart/${t.id}`,s={data:{product_id:t.product_id,qty:t.qty}};this.status.loadQty=t.id,e.put(a,s).then(()=>{this.status.loadQty="",this.getCarts()}).catch(d=>{c.fire(d.response.data.message)})}},getters:{}});export{m as c};
