import{e as A,f as I,m as g,g as b,_ as S,o as i,c as r,a as t,t as a,h as D,v as U,F as f,i as L,r as p,b as h,d as _,j as y,k as C,l as P}from"./index-0oAfesL3.js";import{S as M}from"./sweetalert2.all-hWzV_FaV.js";import{c as v}from"./cartStore-2Wbd2u4T.js";import{M as q,P as B}from"./PaginationComponent-bisSQ6Ks.js";var R={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"dorayu",BASE_URL:"/vite-deploy-week07/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:k,VITE_PATH:w}=R,$=A("productStore",{state:()=>({products:[],pagination:{},productItem:{},loadItem:"",isLoading:!1}),actions:{getProducts(o=1){const s=`${k}/api/${w}/products?page=${o}`;this.isLoading=!0,I.get(s).then(d=>{const{products:c,pagination:l}=d.data;this.isLoading=!1,this.products=c,this.pagination=l}).catch(d=>{M.fire(d.response.data.message)})},getProductItem(o){const s=`${k}/api/${w}/product/${o}`;this.loadItem=o,I.get(s).then(d=>{const{product:c}=d.data;this.loadItem="",this.productItem=c}).catch(d=>{M.fire(d.response.data.message)})}}}),N={data(){return{bsModal:null,qty:1}},mounted(){this.bsModal=new q(this.$refs.modal,{backdrop:"static",keyboard:!1})},methods:{...g(v,["addCart"]),openModal(){this.qty=1,this.bsModal.show()},hideModal(){this.bsModal.hide()},fetchAddCart(o,s){this.addCart(o,s)}},computed:{...b($,["productItem"])}},F={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},H={class:"modal-dialog modal-xl",role:"document"},O={class:"modal-content border-0"},j={class:"modal-header bg-dark text-white"},z={class:"modal-title",id:"exampleModalLabel"},G=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),J={class:"modal-body"},K={class:"row"},Q={class:"col-sm-6"},W=["src"],X={class:"col-sm-6"},Y={class:"badge bg-primary rounded-pill"},Z={class:"h5"},x={class:"h6"},tt={class:"h5"},ot={class:"input-group"},st=["value"];function et(o,s,d,c,l,m){return i(),r("div",F,[t("div",H,[t("div",O,[t("div",j,[t("h5",z,[t("span",null,a(o.productItem.title),1)]),G]),t("div",J,[t("div",K,[t("div",Q,[t("img",{class:"img-fluid",src:o.productItem.imageUrl,alt:""},null,8,W)]),t("div",X,[t("span",Y,a(o.productItem.category),1),t("p",null,"商品描述："+a(o.productItem.description),1),t("p",null,"商品內容："+a(o.productItem.content),1),t("div",Z,a(o.productItem.price)+" 元",1),t("del",x,"原價 "+a(o.productItem.origin_price)+" 元",1),t("div",tt,"現在只要 "+a(o.productItem.price)+" 元",1),t("div",null,[t("div",ot,[D(t("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":s[0]||(s[0]=n=>l.qty=n)},[(i(),r(f,null,L(20,(n,u)=>t("option",{key:u,value:n},a(n),9,st)),64))],512),[[U,l.qty,void 0,{number:!0}]]),t("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:s[1]||(s[1]=n=>m.fetchAddCart(o.productItem.id,l.qty))},"加入購物車")])])])])])])])],512)}const at=S(N,[["render",et]]),dt={data(){return{}},components:{ShowProductModal:at,PaginationComponent:B},computed:{...b($,["products","pagination","loadItem","isLoading"]),...b(v,["cartList","status"])},methods:{...g($,["getProducts","getProductItem"]),...g(v,["addCart","getCarts"]),fetchProductItem(o){this.$refs.modal.openModal(),this.getProductItem(o)}},mounted(){this.getProducts(),this.getCarts()}},nt={class:"container my-4"},it=t("h2",null,"前台產品列表",-1),lt={class:"mt-4"},ct={class:"row row-cols-5 my-4 g-4"},rt={class:"card"},ut=["src"],pt={class:"card-body"},mt={class:"card-title"},ht={class:"card-text"},_t={class:"btn-group btn-group-sm d-flex"},gt=["disabled","onClick"],bt=["disabled","onClick"];function ft(o,s,d,c,l,m){const n=p("VueLoading"),u=p("font-awesome-icon"),V=p("PaginationComponent"),E=p("ShowProductModal");return i(),r(f,null,[h(n,{active:o.isLoading},null,8,["active"]),t("div",nt,[it,t("div",lt,[t("div",ct,[(i(!0),r(f,null,L(o.products,e=>(i(),r("div",{class:"col",key:e.id},[t("div",rt,[t("img",{src:e.imageUrl,class:"card-img-top",alt:"圖片"},null,8,ut),t("div",pt,[t("h6",mt,a(e.title),1),t("p",ht,[t("del",null,"原價 "+a(e.origin_price)+" 元",1),_(" / "),t("span",null,"特價 "+a(e.price)+" 元",1)]),t("div",_t,[t("button",{type:"button",class:"btn btn-outline-secondary",disabled:e.id===o.loadItem,onClick:y(T=>m.fetchProductItem(e.id),["prevent"])},[e.id===o.loadItem?(i(),C(u,{key:0,icon:["fas","spinner"],"spin-pulse":""})):P("",!0),_(" 查看更多 ")],8,gt),t("button",{type:"button",class:"btn btn-outline-danger",disabled:e.id===o.status.loadCart,onClick:y(T=>o.addCart(e.id),["prevent"])},[e.id===o.status.loadCart?(i(),C(u,{key:0,icon:["fas","spinner"],"spin-pulse":""})):P("",!0),_(" 加到購物車 ")],8,bt)])])])]))),128))])]),h(V,{pages:o.pagination,onChangePage:o.getProducts},null,8,["pages","onChangePage"])]),h(E,{ref:"modal"},null,512)],64)}const Ct=S(dt,[["render",ft]]);export{Ct as default};
